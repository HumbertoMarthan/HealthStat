<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:sec="http://www.springframework.org/security/facelets/tags"
	xmlns:util="http://java.sun.com/jsf/composite/componentes"
	xmlns:p="http://primefaces.org/ui" template="/WEB-INF/template.xhtml">

	<ui:define name="title">Prontuário</ui:define>
	<ui:define name="head">
		<style>
.ui-g label {
	font-size: medium;
	color: black;
	font-weight: bold
}

.ui-selectoneradio label {
	cursor: pointer;
	display: inline-block;
	margin: 0 16px 0 8px;
	vertical-align: middle;
	/*color: #2e6e9e !important;*/
	font-size: medium;
}

.ui-state-default, .ui-widget-content .ui-state-default,
	.ui-widget-header .ui-state-default {
	border: 1px solid #c5dbec;
	font-weight: bold;
	color: black;
}

.ui-fluid .ui-inputmask {
	font-size: 20px;
	width: 100%;
	text-align: center;
	height: 35px;
	color: black;
}

.ui-fluid .ui-inputtext {
	width: 100%;
	height: 35px;
	font-size: large;
	text-align: center;
	color: black;
}

.ui-fluid .ui-inputtextarea {
	width: 100%;
	height: 35px !important;
	color: black;
}

.ui-fluid .ui-calendar, .ui-fluid .ui-calendar input {
	width: 100%;
	height: 35px;
	font-size: 20px !important;
	text-align: center;
	color: black;
}

.ui-selectonemenu label.ui-selectonemenu-label {
	cursor: pointer;
	height: 33px;
	font-size: 20px;
	text-align: center;
}

.ui-selectoneradio label {
	cursor: pointer;
	display: inline-block;
	margin: 0 16px 0 8px;
	vertical-align: middle;
	/*color: #2e6e9e !important;*/
	font-size: medium;
}

.ui-state-default, .ui-widget-content .ui-state-default,
	.ui-widget-header .ui-state-default {
	border: 1px solid #c5dbec;
	font-weight: bold;
	color: black;
}

</style>
	</ui:define>
	<ui:define name="content">
		<h:form id="form">
			<div class="ui-fluid">
				<p:tabView id="tabView">
					<p:tab title="Lista de Prontuário">
						<p:panel header="Prontuários" style="text-align:center">
							<div class="ui-g">
								<div class="ui-g-12">
									<h:panelGroup id="botoes">
										<div class="ui-g-12 ui-lg-2">
											<p:commandButton id="botaoEditar" value="Redirecionar"
												style="height:40px; background: lightskyblue !important  ;
										   background-color: lightskyblue ;
										   color:white !important;
										   font-size:large;"
												immediate="true" action="#{prontuarioBean.redirecionarGuia}"
												update="table, @form"
												rendered="#{prontuarioBean.prontuarioModel.idProntuario > 0 and (prontuarioBean.prontuarioModel.status eq 'P') }">

												<f:setPropertyActionListener value="#{d}"
													target="#{prontuarioBean.prontuarioModel}" />
											</p:commandButton>
										</div>
										<div class="ui-g-12 ui-lg-3">
											<p:selectOneRadio value="#{prontuarioBean.campoBuscaAtivo}">
												<f:selectItem itemLabel="Todos" itemValue="T" />
												<f:selectItem itemLabel="Pendente" itemValue="P" />
												<f:selectItem itemLabel="Finalizado" itemValue="F" />
												<p:ajax event="change" listener="#{prontuarioBean.busca}"
													update="tablea" />
											</p:selectOneRadio>
										</div>
									</h:panelGroup>
									<div class="ui-g-12 ui-lg-3">
									 <div class="ui-inputgroup">
										<p:inputText value="#{prontuarioBean.campoBusca}"
											placeholder="Buscar pelo Nome" id="inputNome"/>
										<p:commandButton
											styleClass="btn btn-blue" icon="ui-icon-search"
											actionListener="#{prontuarioBean.busca}"
											update=" inputNome, tablea" />
									</div></div></div>
							</div>
						</p:panel>
						<p:panel>
							<div class="ui-g">
								<br />
								<p:dataTable value="#{prontuarioBean.listaProntuario}" var="d"
									emptyMessage="Não há registros" rows="10" paginator="true" 
									rowKey="#{d.idProntuario}" selectionMode="single" id="tablea"
									selection="#{prontuarioBean.prontuarioModel}">

									<p:ajax event="rowSelect"
										listener="#{prontuarioBean.onRowSelect}"
										update="tablea,form:tabView:botoes " />

									<p:column headerText="Data da Agendada" priority="1"
										style="overflow: hidden;text-align: center; font-size: large; width: 15%">
										<p:outputLabel value="#{d.dataConsulta}" style="color:green">
											<f:convertDateTime pattern="dd/MM/yyyy HH:mm"
												timeZone="America/Sao_Paulo" />
										</p:outputLabel>
									</p:column>

									<p:column headerText="Paciente" priority="1"
										style="overflow: hidden;text-align: left; font-size: large">
										<p:outputLabel value="#{d.paciente.pessoa.pessoaNome}" />
										<br />
										<p:outputLabel value="CPF - #{d.paciente.pessoa.pessoaCPF}" />
									</p:column>

									<p:column headerText="Médico" priority="1"
										style="overflow: hidden;text-align: left; font-size: large">
										<p:outputLabel value="#{d.medico.pessoa.pessoaNome}" />
										<br />
										<p:outputLabel value="#{d.medico.especialidades}" />
									</p:column>

									<p:column headerText="Endereço" priority="5"
										style="overflow: hidden;text-align: left; font-size: large">
										<p:outputLabel value="#{d.paciente.pessoa.logradouro}" />
										<br />
										<p:outputLabel value="#{d.paciente.pessoa.bairro}" />
										<br />
										<p:outputLabel value="#{d.paciente.pessoa.localidade} - " />
										<p:outputLabel value="#{d.paciente.pessoa.cep}" />
										<br />
									</p:column>
								</p:dataTable>
							</div>
						</p:panel>

					</p:tab>
					<p:tab title="Histórico">
						<div class="ui-g">
							<div class="ui-g-12 ui-lg-12">
								<ui:include src="/prontuario/historico.xhtml" />
							</div>
						</div>
					</p:tab>
				</p:tabView>
			</div>
		</h:form>
	</ui:define>
</ui:composition>

